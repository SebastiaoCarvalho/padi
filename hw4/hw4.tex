\documentclass{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows,positioning}
\renewcommand{\thesubsection}{\thesection \space \alph{subsection})}
\DeclareMathOperator{\EX}{\mathbb{E}}% expected value
\DeclareMathOperator{\JPI}{J^\pi} % J pi

\title{Planing, Learning and Intelligent Decision Making - Homework 4}
\author{99326 - Sebasti√£o Carvalho, 99331 - Tiago Antunes}
\date{\today}

\begin{document}

\maketitle

\tableofcontents

\section{Question 1}

\subsection{}

To find the equilibrium points for the o.d.e (2), we need to solve the following equation:

\medskip

$\dot{J} = 0 \Leftrightarrow \EX_\pi[c_t + (\gamma - 1) J] = 0$
$\Leftrightarrow \EX_\pi[c_t] + (\gamma - 1) \EX_\pi[J] = 0$

\medskip

Since $\EX_\pi[c_t] = c_\pi$, 

\medskip

$c_\pi = (1 - \gamma) \EX_\pi[J]$
$\Leftrightarrow \EX_\pi[J] = \frac{c_\pi}{1 - \gamma}$

\medskip

Since $J$ doesn't depend on $\pi$, $\EX_\pi[J] = J$, and $\JPI = \frac{c_\pi}{1 - \gamma}$, we have that 

\medskip

$\EX_\pi[J] = \frac{c_\pi}{1 - \gamma}$
$\Leftrightarrow J = \JPI$

\medskip

So the equilibrium point is $\JPI$, since it's the only point that satisfies the equation.

\subsection{}

$\dot{E_t} = \frac{d}{dt}  \frac{1}{2}  \left(J^{(t)} - \JPI \right)^2$

$ = \frac{1}{2}  \frac{d}{dt}  \left(J^{(t)} - \JPI \right)^2$

$ = \frac{1}{2}  2 \left(J^{(t)} - \JPI \right) \frac{d}{dt}  \left(J^{(t)} - \JPI \right)$

$ = \left(J^{(t)} - \JPI \right) \dot{J}^{(t)}$

$ = \left(J^{(t)} - \JPI \right) \EX_\pi[c_t + (\gamma - 1) J^{(t)}]$

\medskip

Since $\JPI$ is an equilibrium point, $\dot{J}^\pi$ is 0, and we have that

\medskip

$ = \left(J^{(t)} - \JPI \right) (\EX_\pi[c_t + (\gamma - 1) J^{(t)}] - \dot{J}^\pi)$

$ = \left(J^{(t)} - \JPI \right) (\EX_\pi[c_t + (\gamma - 1) J^{(t)}] - (c_\pi + (\gamma - 1) \JPI))$

$ = \left(J^{(t)} - \JPI \right) (\EX_\pi[c_t] + (\gamma - 1) \EX_\pi[J^{(t)}] - c_\pi - (\gamma - 1) \JPI)$

$ = \left(J^{(t)} - \JPI \right) (c_\pi +  (\gamma - 1) J^{(t)} - c_\pi - (\gamma - 1) \JPI)$

$ = (\gamma - 1) \left(J^{(t)} - \JPI \right) (J^{(t)} - \JPI)$

$ = (\gamma - 1) \left(J^{(t)} - \JPI \right)^2$

\bigskip

Since $\left(J^{(t)} - \JPI \right)^2$ is always positive, and $\gamma - 1$ is always negative, 
we have that $\dot{E_t}$ is always negative, and a negative derivative means that the function is decreasing. 

Hence, the energy is always decreasing as we move foward in time.
\subsection{}

The result obtained in (b) suggests that the energy is always decreasing as we move foward in time, unless $J^{(t)} = J^{\pi}$, 
at which point the derivative is 0, meaning that the value will not change.
Given its equation and that the energy is only 0 if $J^{(t)} = J^{\pi}$, we conclude that $J^{(t)}$ converges to $J^{\pi}$
until they're equal, and then it will permanently stay equal.
Knowing that in this case, the state $\mathcal{X} = \{x\}$, we can conclude that if the states are visited infinitely often, 
the TD(0) algorithm converges to $J^{\pi}$, for any $\gamma \in [0, 1]$.

\end{document}